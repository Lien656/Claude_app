name: Build APK  

on:  
  push:  
    branches: [ main ]  
  pull_request:  
    branches: [ main ]  

jobs:  
  build:  
    runs-on: ubuntu-22.04  # не latest, чтоб не глючило  
    steps:  
      - uses: actions/checkout@v4  
      - name: Build with Buildozer  
        uses: ArtemSBulgakov/buildozer-action@v1  
        with:  
          command: buildozer android debug  
          workdir: .  
          buildozer_version: master  # или stable, если трещит  
      - name: Upload APK  
        uses: actions/upload-artifact@v4  
        with:  
          name: claude-home-apk  
          path: bin/*.apk  
      - name: Upload build log on failure  
        if: failure()  
        uses: actions/upload-artifact@v4  
        with:  
          name: build-log  
          path: .buildozer/logs/*  

